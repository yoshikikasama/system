# udemy SOA模擬試験 3

## 1.
- EC2インスタンスにサードパーティのメールソフトウェアを利用したメール送信機能を実装するために
    - そのEC2インスタンスにElastic IPアドレスを設定することが必要です。それによって、AWSはISPおよびインターネットのスパム対策組織と連携して、これらElastic アドレスから送信されたメールにスパムのフラグが立てられる可能性を減らしてくれます。
    - メールの送信に使用されるElastic IPアドレスに静的なリバースDNSレコードを割り当てる必要があります。
    - リバースDNSレコードを作成する前に、Elastic IPアドレスを指すフォワードDNSレコード（レコードタイプA）が存在する必要があります。したがって、EC2インスタンスにElastic IPを割り当て、Route 53でEC2インスタンスのAレコードを作成することが必要です。

- Elasitc IPアドレス: 固定のパブリックIPアドレスをEC2インスタンスに設定できるサービス。
- EC2インスタンスに自動的に付与されるパブリックIPアドレス: インスタンスを起動するごとに新しいIPアドレスに変化する。
- DNS前方ルックアップ: DNSシステムがクエリーを受けてIPアドレスを返す
- リバースDNSルックアップ(リバースDNS): DNSシステムがクエリーを受けてドメインを返す
- DNS(Domain Name System): ドメイン名に対応するIPアドレスを教えてくれるシステムです。 
- DNSサーバー: DNSのサービスを実際に担当している。
    - キャッシュDNSサーバー: PCからの名前解決要求（このドメインのIPアドレスは何ですか？）をとりまとめる、キャッシュにない場合、権威DNSサーバーへ。
    - 権威DNSサーバ: 名前解決要求に対して名前解決結果を返答する
- レジストリ: ドメインの管理機関で、各ドメイン情報を持つデータベースを管理しています。ドメインの種類によってレジストリは異なります。
- レジストラ: ドメインの仲介登録業者で、レジストリデータベースに直接ドメイン情報を登録する事ができます。 
- ゾーンファイル: ドメイン名とIPアドレスの対応表
    - DNSレコード: ゾーンファイルの一行一行のこと。
    - ![Screenshot 2022-11-26 at 12 31 54](https://user-images.githubusercontent.com/61643054/204071124-9f5021a3-a093-43e7-960e-478c7232efbb.png)
    - レコードの種類: 
        - Aレコード: IPv4アドレスをドメインに関連付けるために利用。アドレス（Address）の頭文字をとってAレコードだそうです。 一番基本的なレコードです。
        - MXレコード: 対象ドメイン宛のメールの配送先（メールサーバ）のホスト名を定義するレコードです。 メールエクスチェンジ(Mail Exchange)の略でMXレコードだそうです。 独自ドメインのメールを使用する際は必要なレコードです。 設定値には、予めAレコード設定を行ったホスト名が必要です。 （例） remacre.jp. IN MX 10 mail.remacre.jp. 意味：◯◯@remacre.jpというメールアドレスはmail.remacre.jpが受信します。
        - NSレコード: ゾーン情報を管理するネームサーバーのサーバー名を定義するレコードです。 ネームサーバー（Name Server）の略でNSレコードだそうです。 設定値には、予めAレコード設定を行ったホスト名が必要です。 （例） remacre.jp. IN NS 01.dnsv.jp. 意味：ドメインremacre.jpはネームサーバー01.dnsv.jpに問い合わせてね。
        - CNAMEレコード: ホスト名に対する別名を定義するレコードです。 キャノニカルネーム(Canonical NAME)の略でCNAMEレコードだそうです。 ドメイン名を別のドメイン名に転送する時などに利用します。 （例） remacre.jp. IN A 59.106.27.217 www.remacre.jp. IN CNAME remacre.jp. 意味：ドメインwww.remacre.jpはドメインremacre.jpと同じですよ。
        - SOA: ドメインのDNSサーバー/ドメイン管理者のメールアドレス/シリアル番号などを保持してゾーン転送時に情報が更新されているかの判断に利用する。
        - PTRレコード: ポインタレコード。IPアドレスからドメイン名の検索をクエリします。
            - スパム対策：一部のメールのスパム対策フィルターは、メールアドレスのドメイン名をチェックし、関連付けられているIPアドレスが正規のメールサーバーで使用されているものであるかを確認するためにDNSの逆引きを使用しています。
            - 注意点としては、ホストゾーンのドメイン名の最後に .in-addr.arpaをつけること、 最終的に逆引きしたいIPアドレスの第4オクテットから逆に設定されたレコードにする必要がある点です。
            - 例えば、今回は10.0.1.10のIPアドレスを逆引きしたいと思っています。 この場合、最終的に10.1.0.10.in-addr.arpaのレコードができていれば、逆引きすることができます。


## 2.
- AutoScaling: 1 つの統合されたインターフェイスからアプリケーションを強化するすべてのスケーラブルなリソースの自動スケーリングを構成することができます。以下のリソースがあります。
    - Amazon EC2: Amazon EC2 Auto Scaling グループ内で Amazon EC2 インスタンスを起動または終了します。詳細はこちら。
    - Amazon EC2 スポットフリート: Amazon EC2 スポットフリートのインスタンスを起動または終了します。あるいは、料金やキャパシティーが原因で中断されているインスタンスを自動的に置き換えます。詳細はこちら。
    - Amazon ECS: 負荷の変動に合わせて ECS サービスの必要数を調整します。詳細はこちら。
    - Amazon DynamoDB: DynamoDB テーブルまたはグローバルセカンダリインデックスで、プロビジョニングされている読み込みおよび書き込みキャパシティーを増やせるため、スロットリングなしでトラフィックの急激な増加に対応できます。詳細はこちら。
    - Amazon Aurora: Aurora DB クラスターにプロビジョニングされている Aurora リードレプリカの数を動的に調整し、アクティブな接続やワークロードの急激な増加に対応します。詳細はこちら。
- EC2 起動テンプレート: AutoScalingでスケールする際のテンプレート。

- CloudFormation:
    - ![Screen Shot 2022-08-25 at 6 29 45](https://user-images.githubusercontent.com/61643054/186527469-b698ebd0-2300-4c00-bda1-6a36064c480b.png)
    - ![Screen Shot 2022-08-25 at 6 30 47](https://user-images.githubusercontent.com/61643054/186527499-830f331a-e110-4bca-bb41-4b3bca63c6c7.png)
    - Conditions: エンティティが作成または設定される状況を定義することができます。たとえば、条件を作成し、それをリソースまたは出力に関連付けることで、条件が true の場合にのみ AWS CloudFormation がリソースまたは出力を作成するようにできます。
    - Mappings: キーと名前付きの一連の値とが対応付けられます。たとえば、リージョンに基づく値を設定する場合、リージョン名をキーとしてAMI IDなどの値をマッピングすることが可能です。
        - ![Screenshot 2022-11-27 at 7 05 49](https://user-images.githubusercontent.com/61643054/204110709-b36ea053-18b5-4d6a-bf28-a2fb652093bb.png)
    - Resources: スタックに含める AWS リソース (Amazon EC2 インスタンスや Amazon S3 バケットなど) を宣言します。 
    - Outputs: 作成したリソースを他のスタックで使用する際にexport宣言をするときに使用する

## 3.
- ロードバランサーのスキーム: ロードバランサーを内部向けにするかインターネット向けにするか選択する必要
    - インターネット向け(internet-facing): インターネット向けロードバランサーのノードにはパブリック IP アドレスが必要です。インターネット向けロードバランサーの DNS 名は、ノードのパブリック IP アドレスにパブリックに解決可能です。したがって、インターネット向けロードバランサーは、クライアントからインターネット経由でリクエストをルーティングできます。
    - 内部向け(internal): 内部ロードバランサーのノードはプライベート IP アドレスのみを持ちます。内部ロードバランサーの DNS 名は、ノードのプライベート IP アドレスにパブリックに解決可能です。そのため、内部向けロードバランサーは、ロードバランサー用に VPC へのアクセス権を持つクライアントからのみ、リクエストをルーティングできます。

## 4.

- webアプリ on EC2インスタンスのステータスチェックに失敗した場合のエラー特定方法:
    - アプリ上の実行トラブルが発生しているかどうかをアプリケーションログから確認
    - EC2インスタンスのシステムログの確認
- EC2インスタンスのCloudWatchの標準メトリクス: CPU使用率、ディスク容量などを知ることができるが詳細な原因解析はできない
- CloudWatch Agent on EC2: メモリやディスクの使用率などのカスタムメトリクスを取得するもの。
- EC2インスタンスのフローログ: EC2インスタンスのトラフィックログを取得する機能。

## 5.
- EC2:
    - インスタンスタイプ: ユースケースごとに選択できるCPUやメモリなどの組み合わせ
    - インスタンスファミリー: インスタンスタイプの用途別のカテゴリー。
        - 汎用: インスタンスのリソースを同じ割合で使用するアプリケーションに最適なインスタンス
            - A1: Arm エコシステムによってサポートされるスケールアウト型の Arm ベースのワークロードに最適で、大幅なコスト削減を実現できるが、T2およびT3インスタンスよりも高価なインスタンスタイプ。
            - T2, T3: ベースラインレベルの CPU パフォーマンスを提供する次世代のバースト可能な汎用インスタンスタイプであるため、いつでも必要な時間だけ CPU 使用率をバーストさせることが可能です。
            - M5: Intel Xeon_ Platinum 8175M プロセッサを搭載した最新世代の汎用インスタンス。T2およびT3インスタンスと異なり、バースト性能がないため、CPU使用率の上昇に対しても一定のパフォーマンスを保証できるインスタンスタイプではない。
        - コンピューティング最適化: 高パフォーマンスプロセッサが必要なコンピューティングバウンドなアプリケーションに利用。
        - メモリ最適化: メモリ内の大きいデータセットを処理するワークロードに対して高速なパフォーマンスに最適なインスタンス。
        - ストレージ最適化: ローカルストレージの大規模なデータセットに対する高いシーケンシャルな読み取りおよび書き込みアクセスを必要とするワークロード用。
        - 高速コンピューティング: ハードウェアアクセラレーターを使用して、浮動小数点計算、グラフィックス処理、データパターン統合などの機能をCPUで実行するソフトウェアに最適。
            - G4: 業界内で最も費用対効果の高い GPU インスタンスで、機械学習モデルの本番環境へのデプロイやグラフィックスを多用するアプリケーションに適しています。高機能ですがT2およびT3インスタンスよりも高価であり、高パフォーマンスが必要なケースに適しているため、コスト最適なインスタンスではありません。機械学習やゲーミングに最適なインスタンスタイプとなっている。
    - インスタンスサイズ: インスタンスタイプの「.」より後。「t2.micro」であれば「micro」。サイズが大きくなるごとにメモリが倍になる。

## 6.
- S3イベント通知: バケット内でデータ削除や更新などの特定のイベントが発生した際の通知を設定することが可能です。Amazon SNS 、Amazon SQSまたはLambdaを宛先に対してイベントを発行できます。

## 7.
- Route 53:
    - Hosted Zone: ネームサーバー。ドメインのリソースレコードを管理。
    - プライベートホストゾーン: VPC内に閉じたプライベートネットワーク内のDNSドメインのレコードを管理するコンテナ。
    - パブリックホストゾーン: インターネット上に公開されたDNSドメインのレコードを管理するコンテナ
- 
- トラフィックルーティング: クライアントからのトラフィックを要件に応じて適切な宛先へ転送すること。
- ルーティングポリシー: Route53では複数のルーティングポリシーにより柔軟なルールを作成可能。
    - シンプルルーティング:
        - レコードセットで事前に設定された値のみに基づいてDNSクエリに応答する
        - 従来のDNSと同様に静的なマッピングによりルーティングが決定される
    - 加重ルーティング:
        - 複数エンドポイントごとに設定された重みづけに基づいて、DNSクエリに応答する
        - より重みづけの高いエンドポイントリソースにより多くルーティングされる
    - レイテンシールーティング:
        - AWSリージョンとの遅延によってDNSクエリに応答する
        - リージョン間の遅延が少ない方のリソースにルーティングされる
    - フェイルオーバールーティング:
        - ヘルチェック結果に基づいて利用可能なリソースをDNSクエリに応答する
        - 利用可能なリソースのみにルーティングする
    - 位置情報ルーティング: 
        - クライアントの位置情報に基づいて、DNSクエリに応答する
        - 特定の地域・国からのDNSクエリに対して特定のアドレスを応答する






## 51.

- メモリとCPUの違い:
