# Techstock

## 71.

- Elastic Fabric Adapter: High Performance Computing (HPC) と機械学習アプリケーションを高速化するために Amazon EC2 インスタンスにアタッチできるネットワークデバイスです。EFA では、AWS クラウドが提供するスケーラビリティ、柔軟性、伸縮性により、オンプレミス HPC クラスターのアプリケーションパフォーマンスを実現できます。

## 72.

- Amazon DynamoDB Accelerator(DAX)は Amazon ElasticCache for Memcached よりも優れたキャッシュを提供。

## 73.

- CloudWatch 埋め込みメトリックフォーマット: lambda で、詳細なログイベントデータと一緒にカスタムメトリックを埋め込むことができます。CloudWatch はカスタムメトリックを自動的に抽出し、リアルタイムのインシデント検出のためにそれらを視覚化して警告できるようにします。また、CloudWatch Logs Insights を使用して、抽出されたメトリックに関連付けられた詳細なログイベントを照会し、運用イベントの根本原因に関する深い洞察を提供できます。

- AWS WAF + CloudFront + S3 + ALB:
  - CloudFront: オリジン設定のカスタムヘッダ設定し、リクエスト時にカスタムヘッダーを追加する。
  - AWS WAF: カスタムヘッダーの存在を検証するルールで WebACL を作成し、ALB に関連づける。

## 74.

- AWS Firewall Manager: AWS Network Firewall のファイアウォールルールをデプロイし、アカウントと Amazon VPC 間でネットワークを出入りするトラフィックを 1 か所から制御できます。一元的に設定したルールのセットへの変更が、アカウントと VPC に自動的にデプロイされます。これにより、セキュリティ管理者は組織内に新しいアカウントと VPC が作成された場合でも、組織全体で一元的に義務付けられたファイアウォールルールを一貫して適用できます。同時に、Firewall Manager は、Network Firewall 保護が欠落している VPC やアカウントなどの非準拠の問題も報告します。

- AWS Outposts ラック:
  - フルマネージド型の AWS インフラストラクチャ、ネイティブな AWS のサービス、API、およびツールを、オンプレミス施設のほとんどすべての顧客に提供します。AWS Outposts ラックは、低レイテンシー、ローカルでのデータ処理、またはローカルでのデータ保存のためにオンプレミスで実行する必要のあるアプリケーションを可能にします。その一方で、オンプレミスのインフラストラクチャの調達、管理、アップグレードのために必要な、差別化につながらない面倒な作業を取り除きます。
  - ハードウェアの管理(物理的な管理下)を維持するという会社の要件を満たし、低レイテンシーな通信のために Amazon S3 Bucket と Amazon EC2 インスタンスを Outposts ラックにデプロイすることもできる。

## 75.

- ElastiCache: データをノードのメモリに保存するので非常に高速でデータの出し入れが可能です。ですがメモリにデータを保存しているのでノードが落ちてしまう（再起動を含む）と中のデータが無くなってしまいます。なので ElastiCache には無くなっても良いデータを保存するようにしましょう。
- DynamoDB: 可用性担保のために書き込まれたデータを複数の AZ に保存したり、接続には SSL を用いるので ElastiCache に比べるとやや書き込みが遅くなります。ElastiCache は構成もユーザが選べるので通信元（クライアント）とノードを同一 AZ に寄せればより通信を早くするということも可能ですね。また例えばセッション情報のような頻繁に書き/読み込みされるようなデータの場合にはリクエストの度に課金されていく DynamoDB だと ElastiCache に比べて料金が割高になる可能性があります。
- DynamoDB DAX:

  - キャッシュ機能を提供するサービス。
  - DynamoDB に書き込まれた値が反映されて、結果整合性のある読み込み時にのみ参照される DynamoDB の前段に存在するキャッシュサービスです。VPC 内からの利用が必須です。
  - DynamoDB の読み込みコストを軽減できます。書き込み処理の場合には一旦 DynamoDB に書き込まれてからキャッシュに反映される仕組みなので書き込んだ値はすぐにはキャッシュに反映されません。
  - DAX を検討される際にはその特徴（VPC 内からしか使えない、書き込んだ値はすぐには反映されない、結果整合性のある読み込みでしか参照されない）を良く理解しアプリケーション的に問題がないことを確認してください。

- 高速な通信がしたい、保存するデータは書き込みと読み込みが頻繁に発生するためコストが心配
  - ElastiCache
- データの永続化がしたい

  - DynamoDB

- Amazon Timestream: 高速かつスケーラブルなサーバーレス時系列データベースサービス。

## 76.

- AWS X-Ray: 本番環境や分散アプリケーションを debug できる。

## 77.

- Amazon SQS キューまたは別のリージョンでの AWS Lambda 関数へ Amazon SNS メッセージを送信する:

  - Amazon SNS は、Amazon SQS キューへの通知のクロスリージョン配信と AWS Lambda 関数をサポートしています。リージョンの 1 つがオプトインリージョンである場合は、サブスクライブされたリソースのポリシーで別の Amazon SNS サービスプリンシパルを指定する必要があります。
  - Amazon SNS サブスクリプションコマンドは、Amazon SNS がホストされているリージョンのターゲットアカウントで実行する必要があります。例えば、Amazon SNS が us-east-1 リージョンのアカウント「A」にあり、Lambda 関数が us-east-2 リージョンのアカウント「B」にある場合、サブスクリプション CLI コマンドは us-east-1 リージョンのアカウント「B」で実行する必要があります。

- Amazon SNS トピックへ Amazon SQS キューをサブスクライブする:

  - メッセージがトピックに発行されると、Amazon SNS はサブスクライブされたすべてのキューにメッセージを送信します。Amazon SQS は、サブスクリプションと必要なアクセス許可を管理します。
  - ![Screenshot 2023-07-30 at 17 18 24](https://github.com/yoshikikasama/network-and-server/assets/61643054/3a85091f-0dc9-4d34-bdfd-903953b6f41a)

- Amazon RDS イベント通知: データベース障害に対応するように SNS TOPIC に通知を送信し、AWS Lambda 関数を呼び出すことができる。

## 79.

- AWS Transit Gateway: Cider が重複している VPC 間のルーティングをサポートしていない。

## 80.

- AWS WAF:
  - リクエストの送信元 IP アドレス
  - クエリ文字列の値
  - 送信元の国

## 81.

- App Runner: ソースコードまたはコンテナレジストリに接続することで、アプリケーションがデプロイされます。

- Client と ALB 間の通信 → ACM 証明書を利用して保護、ALB に関連づける。
- ALB と EC2 インスタンス間の通信 → サードパーティの証明書を EC2 インスタンスにインストール

## 82.

- ALB はその設定が単一の AWS Region のみで有効であり、複数の region にまたがる設定はできない。

- AWS CodeBuild の Amazon Elastic File System サンプル:
  - お客様は、CodeBuild プロジェクトの一部として 1 つ以上の EFS ファイルシステム ID を指定できます。EFS ファイルシステムを使用するビルドがトリガーされると、CodeBuild は、EFS ファイルシステムがマウントされ、buildspec で指定されたコマンドにアクセスできるようにします。
  - キャッシュを使用すると、プロジェクトを構築する時間を短縮できます。キャッシュでは、ビルド環境の再利用可能な部分が保存され、複数のビルドでそれらを使用することができます。ビルドプロジェクトでは、Amazon S3 とローカルの 2 種類のキャッシュのうち、いずれかを使用できます。ローカルキャッシュを使用する場合は、3 つのキャッシュモード (ソースキャッシュ、Docker レイヤーキャッシュ、カスタムキャッシュ) のうち 1 つ以上を選択する必要があります。
  - CodeBuild で、EFS をキャッシュとして使用できる。

## 83.

- API Gateway で 502(Bad Gateway エラー): Lambda で同時実行数のクォーターを超えた場合、API Gateway は断続的に HTP ステータスコード 502 エラーを返す。
- API Gateway で 429 エラー: API Gateway の too many request

- Amazon Connect: 電話とチャットの両方のチャンネルでお客様の対応を管理するためのフルマネージドなコンタクトセンターサービス。
- Amazon Pinpoint: お客様とのコミュニケーションを管理し、自動化するためのサービスで SMS を含む複数のメッセージングチャンネルを跨がって使用できる。お客様にテキストメッセージのアンケートを送信できる。
