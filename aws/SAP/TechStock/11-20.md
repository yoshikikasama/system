# Techstock

## 11

- トランザクション制御:

  - BASE モデル : 可用性が最重要視され、緩い状態を基本とし、最終的に一貫性が取れるということを意味している。BASE の考え方で ACID を担保しそうな部分は「Eventual consistency （最終的な一貫性）」のみですが、これだけでは原子性や独立性、永続性が欠落しています。（言及されていないということはつまり、担保されないという事になります）
    - Basicall Available: 基本的に利用可能
    - Soft State: 柔らかい状態
    - Eventual Consistency: 最終的な一貫性
  - ACID モデル: 大量の情報を同時処理しても情報が壊れずに格納できる
    - Atomicity: 原子性
    - Consistency: 一貫性
    - Isolation: 独立性
    - Durability: 永続性

- EBS スナップショットからの復元作業:
  - EC2 インスタンス A の EBS ボリューム A から新しい EBS ボリューム B を作成
  - EC2 インスタンス A の別のディレクトリ(/mnt/new-volume)に EBS ボリューム B をマウント
  - /mnt/new-volume にマウントされた新しいボリューム B にアクセスし、実際のボリューム A 内のウェブサイトのデータをコピーします。

## 13.

- AWS Storage Gateway のバックアップ戦略:

  - キャッシュボリューム: 全てのデータがローカルに保存されているわけではありません。データは仮想アプライアンス経由で Amazon S3 へと保存されますが、その際に仮想アプライアンスにマウントされている Cache Volume に一時的に保存されます。勘の鋭い方はお気づきかと思いますが、データへのアクセスが発生した際、Volume Gateway はまず Cache Volume を参照します。Cache Volume にデータが存在しなかった場合のみ、Amazon S3 へリクエストを行って対象のファイルを取得してきます。ローカルに用意するディスクの容量を最小限に抑えられる点にあります。
  - 保管型ボリューム: 新規にアップロードされたデータをローカルのディスクに保存した上で、非同期的に AWS へとバックアップを行います。すべてのデータがローカルに保存されているため、クライアントからは高速にデータにアクセスすることができます。オンプレミスにデータを保管した上で、バックアップやディザスタリカバリを目的として Storage Gateway を利用することができます。

- BGP（Border Gateway Protocol）: 異なるネットワーク間の経路情報を交換するためのプロトコルであり、オンプレミスネットワークへのトラフィックを正しくルーティングするのに役立ちます。

- 伝播: ルート情報がネットワーク内で広まることを指します。具体的には、ルーターやネットワークデバイス間で経路情報が共有され、ネットワーク上の他のデバイスがその情報を知ることができるようになります。オンプレミスネットワークから AWS Direct Connect を介して接続する場合、BGP を使用してオンプレミスネットワークの特定のルート情報（目的地ネットワークに対する経路）を AWS Direct Connect のお客様のルーター上で伝播（共有）することが必要です。

- 選択したルーティングテーブルに新しいルートを追加します。これは、オンプレミスネットワーク用の特定ルートを指定します。BGP によって伝播されたルート情報を使用するため、目的地としてオンプレミスネットワーク内のネットワークを指定し、ターゲットとして AWS Direct Connect ゲートウェイを指定します。

- ウェブプロキシサーバー: アウトバウンドアクセスの URL ベースのルールを実行するため、特定の URL（製品の更新サイト）以外へのアクセスはブロックします。デフォルトルートを削除することにより、明示的なアウトバウンドアクセスがなければ、インスタンスからのトラフィックはウェブプロキシサーバーを通過するように制限されます。ウェブプロキシサーバーが設定されている場合、インスタンスからのトラフィックはウェブプロキシサーバーを通過するように制限されます。そのため、ウェブプロキシサーバーの設定に基づいてアクセスが許可された特定の宛先のみに制限されます。それ以外の宛先へのアウトバウンドアクセスは拒否されます。

- CloudFront OAI (Origin Access Identity): CloudFront ユーザーを作成して S3 Bucket へアクセスができる。現在は、OAC が推奨されている。
- https://dev.classmethod.jp/articles/amazon-cloudfront-origin-access-control/

- VPC ピアリング: VPC あたりのアクティブな VPC ピアリング接続の上限は 125 個。

- IPSec（Internet Protocol Security）Tunnel:インターネット上での通信にセキュリティを提供するためのプロトコルです。IPSec は、VPN（Virtual Private Network）や他のセキュアなネットワーク接続に使用されます。IPSec トンネルは、公衆インターネットなどの不信なネットワーク上で、安全かつ暗号化された通信経路を確立するために使用されます。通常、IPSec トンネルは、送信元と宛先のネットワーク機器（ルーターやファイアウォールなど）間で確立されます。オフィス間の安全な接続やリモートアクセス VPN など、さまざまなシナリオで使用されます。トンネルは、パケットの送信元 IP アドレスと宛先 IP アドレスに基づいてルーティングされ、通信データはトンネル内で暗号化および保護されます。これにより、ネットワーク上の第三者が通信データを盗聴したり改ざんしたりすることを防ぐことができます。

## 14.

- Amazon S3 Transfer Acceleration: クライアントと S3 Bucket の間で、長距離に渡るファイル転送を高速、簡単、安全に行えるようにする。世界中に分散した CloudFront のエッジロケーションを使用しており、エッジロケーションに到着したデータは、最適化されたネットワークパスで Amazon S3 にルーティングされる。

- DHCP(Dynamic Host Configuration Protocol):

  - VPC 内のデバイスで使用される DNS サーバー、ドメイン名、または Network Time Protocol (NTP) サーバーを制御できます。
  - VPC で DNS 解決を完全に無効にできます。
  - サブネット内の EC2 インスタンスで実行されているアプリケーションは、必要に応じて Amazon DHCP サーバーと通信して、IP アドレスリースまたは他のネットワーク構成情報 (Amazon DNS サーバーの IP アドレスや VPC 内のルーターの IP アドレスなど) を取得できます。

- DHCP オプションセット: VPC 内の EC2 インスタンスが仮想ネットワーク経由で通信するために使用するネットワーク構成のグループ。カスタム DHCP オプションセットを作成するか、VPC から全てのオプションセットの関連付けを解除しない限り、リージョン内の各 VPC は同じデフォルトの DHCP オプションセットを使用する。

  - デフォルトオプションセット: デフォルトの DNS サーバーが含まれています。これは通常、Amazon-provided DNS と呼ばれる Amazon 内部の DNS サービスです。デフォルトでは、この Amazon-provided DNS が VPC 内のリソースに対して DNS 名の解決を提供します。
  - カスタム DHCP オプションセット: 自前の DHCP サーバ等を使いたい場合、DNS サーバ・NTP サーバ・NetBIOS ネームサーバーを使いたい場合に作成。デフォルト DHCP オプションセットを変更できないため、外部の NTP サーバーを使いたい要件が出てきたら必要となる。

- Amazon Route 53 Resolver: 特定のサブネットや AZ には存在せず、VPC に標準で備わっている DNS サーバー。以下の DNS クエリに対応。

  - EC2 インスタンスのローカル VPC ドメイン名
  - プライベートホストゾーンのレコード
  - フルリゾルバに対して外部ドメイン名の再帰的検索

- Amazon RDS: DB インスタンスとは異なる AWS リージョンにリードレプリカを作成できる。

- CloudFront: 短期間でダウンタイムを回避する最適なシナリオは、短期間でスケーリングを改善すること。CloudFront でデータをキャッシュし、既存のインフラストラクチャの負荷を軽減する。

## 15.

- SQS FIFO キュー:
  - FIFO(First In First Out)配信および 1 回だけの処理。単一キュー内に複数の順序付けされたメッセージグループがサポートされている。
  - メッセージが送信または受診された順序が厳密に保持される。
- SQS Standard キュー: 少なくとも 1 回は確実に配信されるが、複数のコピーまたはメッセージが配信されることもある。メッセージが送信されたのとは異なる順序で配信されることもある。
