# Techstock

## 61.

- ![Screenshot 2023-07-23 at 21 39 55](https://github.com/yoshikikasama/network-and-server/assets/61643054/af0343fd-1424-4cee-a0ef-737727950bae)

- Amazon ECS のスポットインスタンス自動ドレイン:

  - 2 分間の中断の通知を受信すると、スポットインスタンスが自動的に "ドレイン" 状態に設定されます。スポットインスタンスで実行している ECS タスクは、インスタンスが削除される前に自動的にシャットダウンがトリガーされ、代替タスクがクラスターの別の場所にスケジュールされます。削除プロセスに入った後のインスタンスで、新しい ECS サービスタスクが開始されることはありません。ECS では、インスタンスに備わっている "ドレイン" 機能を使用して、基盤となる EC2 インスタンスの削除に伴うタスク終了の調整を引き継ぎます。削除の管理、代替タスクのスケジュール設定、LB 接続の正常な終了によって、サービスの中断が発生しにくくなります。お客様にとっては、ECS クラスターの一部としてスポットインスタンスを使用することが容易になります。
  - 利用可能なキャパシティーがなくなった場合、または、スポット料金がお客様のリクエストの上限料金を超えた場合には、Amazon EC2 はスポットインスタンスを終了、停止、または休止状態にします。Amazon EC2 は、終了アクションおよび停止アクションに対して、スポットインスタンスに 2 分間の中断通知を提供します。休止状態のアクションについては、2 分間の通知は提供されません。インスタンスで Amazon ECS スポットインスタンスのドレインが有効になっている場合、ECS はスポットインスタンスの中断通知を受け取り、インスタンスを DRAINING ステータスにします。
  - コンテナインスタンスを DRAINING に設定すると、Amazon ECS によって新規タスクがそのコンテナインスタンスに配置されなくなります。ドレインしているコンテナインスタンス上にある PENDING 状態のサービスタスクは即時停止されます。クラスター内に使用可能なコンテナインスタンスがある場合、そのインスタンスで代わりのサービスタスクが開始されます。

- DRAINING:

  - VM がインスタンス グループから削除されたときや、エンドポイントがゾーンネットワークエンドポイントグループ（NEG）から削除されたときに、既存の進行中リクエストを完了するための時間を確保するプロセスです。
  - コンテナインスタンスを DRAINING に設定すると、Amazon ECS によって新規タスクがそのコンテナインスタンスに配置されなくなります。

- Blue-Green Deployment 戦略の使用:

  - 個別のスタックを効率的に使用して、更新されたアプリケーションを本稼働にデプロイする一般的な方法の 1 つです。
  - Blue 環境は、現在のアプリケーションをホストする本稼働スタックです。
  - Green 環境は、更新されたアプリケーションをホストするステージングスタックです。

- Amazon S3 Transfer Acceleration: CloudFront のエッジロケーションを使用してグローバルユーザーに低レイテンシーアクセスを提供するのに役立つ。

## 62.

- ストアドプロシージャ: 一連の SQL クエリと論理操作を実行するためにユーザーが作成するオブジェクトです。プロシージャはデータベースに保存され、実行するのに十分な権限を持つユーザーが利用できます。
  - ストアードプロシージャーは SELECT 照会に加えてデータ定義言語 (DDL) およびデータ操作言語 (DML) を組み込むことができます。ストアドプロシージャは値を返す必要はありません。ループや条件式を含む PL/pgSQL 手続き型言語を使用して論理フローを制御できます。
  - ストアドプロシージャは通常、データ変換、データ検証、およびビジネス固有の操作のためのロジックをカプセル化するために使用されます。複数の SQL ステップをストアドプロシージャに結合することで、アプリケーションとデータベース間のラウンドトリップを減らすことができます。
- リフトアンドシフト（Lift and Shift）: 「まずはクラウド上にそのまま既存システムをあげて（Lift）、その後に随時変更していく（Shift）」という意味

- AWS App Sync:

  - シンプルな GraphQL ベースの実装
  - オフライン処理やデータ競合の解決をサポートする豊富なチャット向け機能
  - Dynamo DB, AWS Lambda, Elastic Search などから柔軟に構成できる。

- Retain policy: CloudFormation のスタックを Delete してもデータを残す方法

## 63.

- Amazon Managed Streaming for Apache Kafka(Amazon MSK):

  - オープンソースで安全性の高い Apache Kafka クラスターを複数のアベイラビリティーゾーン (AZ) に分散して提供し、耐障害性と可用性の高いストリーミングストレージを実現します。Amazon MSK は、高度に設定可能、観察可能、かつスケーラブルで、さまざまなユースケースに必要な柔軟性と制御を可能にします。

- アクティブ/パッシブ (フェイルオーバー):

  - プライマリリソースまたはリソースグループをほとんどの時間で利用可能にして、すべてのプライマリリソースが使用できなくなった場合に備えて、セカンダリリソースまたはリソースグループをスタンバイ状態にする場合は、フェイルオーバー (アクティブ/パッシブ) 設定を使用します。クエリへの応答で Route 53 が返すのは、正常なプライマリリソースのみです。すべてのプライマリリソースで異常が発生した場合、Route 53 は、DNS クエリへの応答として正常なセカンダリリソースのみを返します。

- RPO, RTO の要件の明確化:
  - ![Screenshot 2023-07-25 at 6 30 36](https://github.com/yoshikikasama/network-and-server/assets/61643054/57217a87-6515-45c1-b412-eaedc9fa94af)
  - ![Screenshot 2023-07-25 at 6 30 43](https://github.com/yoshikikasama/network-and-server/assets/61643054/b94fcc95-caa2-44a4-b5ab-f0866b1a2e68)
  - ![Screenshot 2023-07-25 at 6 30 52](https://github.com/yoshikikasama/network-and-server/assets/61643054/405c53d4-d867-40a2-b774-5d49be99ad02)
  - ![Screenshot 2023-07-25 at 6 31 00](https://github.com/yoshikikasama/network-and-server/assets/61643054/d46609ac-2363-46e1-88cb-c781e1c389c1)
  - ![Screenshot 2023-07-25 at 6 31 08](https://github.com/yoshikikasama/network-and-server/assets/61643054/36bcdd75-f4e9-44ab-8959-d11541c68d75)
  - ![Screenshot 2023-07-25 at 6 31 14](https://github.com/yoshikikasama/network-and-server/assets/61643054/264338b2-b751-4e1e-a92a-d12d37d8ed74)

## 64.

- Amazon MQ / Amazon SQS はどちらもメッセージキューイングサービスですが、それぞれの違いとどんな時にどちらを使用すべきか？:
  - Amazon MQ: 既存サービスで MQ を使っており、そこから AWS へ乗せ替えたい場合
    - ActiveMQ/RabbitMQ いずれかのブローカーを選択してインスタンスを立ち上げる。
    - そのため、キューを使っていない時間帯でもずっとインスタンス料金が課金される。
    - 使用状況によってはスケーリングの考慮やマルチ AZ による冗長化も必要。
  - Amazon SQS: 上記以外の場合(新規立ち上げなど)
    - フルマネージドのメッセージキューサービス。
    - Amazon MQ と異なり、スケーリングの考慮や冗長化を考慮する必要が無くなる。
    - また、従量課金による請求なので使用した分だけの料金になる。(インスタンス料金みたいなのは無い)
- Amazon API Gateway の @connections コマンド:

  - バックエンドサービスは次の WebSocket 接続 HTTP リクエストを使用して、接続されたクライアントへのコールバックメッセージの送信、接続情報の取得、またはクライアントの切断を行うことができます。

- AWS Direct Connect 接続で AWS VPN を確立する方法:
  - Direct Connect 接続で VPC への AWS VPC 接続を確立すると、インターネット経由の VPC よりも速くて安全な場合が多いです。Direct Connect 接続の AWS VPN 接続では、一貫性のあるスループットレベルを確保し、データを保護する暗号化アルゴリズムを実現します。
    - Direct Connect 接続を作成します。
    - Direct Connect 接続用のパブリック仮想インターフェイスを作成します。[Prefixes you want to advertise] (アドバタイズするプレフィックス) で、カスタマーゲートウェイデバイスのパブリック IP アドレスを入力し、必要に応じて、アドバタイズするネットワークプレフィックスを追加します。
    - 注意: 各 AWS リージョン (AWS 中国リージョンは除く) のすべての AWS パブリック IP アドレスのプレフィックスがパブリック仮想インターフェイスに送信されます。これには、AWS マネージドの VPN エンドポイントのパブリック IP アドレスが含まれます。
    - 新しい VPN 接続を作成します。以前のステップで使用したのと同じカスタマーゲートウェイのパブリック IP アドレスを使用してください。
    - 注: カスタマーゲートウェイは、ボーダーゲートウェイプロトコル (BGP) と自律システム番号 (ASN) を使用して設定できます。
    - VPC に接続するように VPN を設定します。

## 65.

- AWS Global Accelerator:

  - 世界中の顧客に提供するアプリケーションの可用性とパフォーマンスを改善するネットワーキングサービスです。
  - AWS Global Accelerator が提供する静的 IP アドレスを、Network Load Balancer、Application Load Balancer、EC2 インスタンス、Elastic IP アドレスなどのリージョン別 AWS リソースまたはエンドポイントに関連付ける。IP アドレスは AWS エッジロケーションからのエニーキャストであるため、ユーザーに近い AWS グローバルネットワークへのオンボーディングを提供します。
  - ゲーム (UDP)、IoT (MQTT)、Voice over IP などの HTTP 以外のユースケース、および静的 IP アドレスまたは確定的な高速地域フェールオーバーを特に必要とする HTTP ユースケースに最適です。
  - 2 つのグローバルな静的 public ip が提供され、アプリケーションへの固定されたエントリポイントとして機能するため、可用性が向上する。
  - Global Accelerator では、2 つのグローバルな静的パブリック IP が提供され、アプリケーションへの固定されたエントリポイントとして機能するため、可用性が向上します。ユーザーは変更を加えることなく、バックエンドで Application Load Balancer、Network Load Balancer、EC2 インスタンス、Elastic IP などの AWS アプリケーションエンドポイントを追加または削除します。
  - エンドポイントの障害による影響を軽減するため、Global Accelerator はトラフィックを最も近い、正常で利用可能なエンドポイントに自動的に再ルーティングします。アプリケーションアーキテクチャが大きくなると複雑となるため、ユーザー向けの IP リストが長くなり、トラフィックルーティングロジックがあいまいになります。
  - AWS Global Accelerator は、グローバルに分散されたエッジロケーションからエニーキャストされる 2 つの静的 IP を提供することでこれを解決し、デプロイされている AWS リージョンの数に関係なく、アプリケーションへの単一のエントリポイントを提供します。このため、アプリケーションの可用性を低下させることなく、オリジン、利用可能なゾーン、リージョンを追加または削除できます。トラフィックルーティングは手動で管理するか、あるいはエンドポイントのトラフィックダイヤルと重みを使用してコンソールで管理します。アプリケーションエンドポイントに障害または可用性の問題がある場合、AWS Global Accelerator が新しい接続を正常なエンドポイントに自動的に数秒以内でリダイレクトします。
  - ![Screenshot 2023-07-26 at 7 29 29](https://github.com/yoshikikasama/network-and-server/assets/61643054/be527141-3e9f-4983-b910-5ac02af602aa)

- Application Load Balancer のリスナー:

  - Application Load Balancer の使用を開始する前に、1 つまたは複数のリスナーを追加する必要があります。リスナーとは、設定したプロトコルとポートを使用して接続リクエストをチェックするプロセスです。リスナーに対して定義したルールにより、ロードバランサーが登録済みターゲットにリクエストをルーティングする方法が決まります。

- ある会社が 10 個の新しいドメイン名を登録しました。これらのドメインは、ビジネスにおけるインターネットマーケティングのために使用されます。同社は、ウェブ訪問者をドメイン固有の URL に送信するソリューションが必要です。JSON ドキュメントが、すべてのドメインとターゲット URL を定義します。Amazon Route 53 は、すべての DNS レコードを管理します。ソリューションアーキテクトは、HTTP と HTTPS クエリを受け取るリダイレクトサービス

  - ![Screenshot 2023-07-26 at 7 58 20](https://github.com/yoshikikasama/network-and-server/assets/61643054/c4281173-83d4-4bd2-a265-9e19978d8e55)

- AWS Network Firewall:

  - ネットワークトラフィックをきめ細かく制御するファイアウォールルールを定義できます。Network Firewall は AWS Firewall Manager と連携するため、Network Firewall ルールに基づいてポリシーを構築し、それらのポリシーを仮想プライベートクラウド (VPC) とアカウント全体に一元的に適用できます。
  - カスタマイズされたルールを実装して、VPC が未承認のドメインにアクセスすることを防止したり、数千の既知の不正な IP アドレスをブロックしたり、シグネチャベースの検出を使用して悪意のあるアクティビティを特定したりできます。AWS Network Firewall は、CloudWatch メトリクスを介してファイアウォールのアクティビティをリアルタイムで可視化し、ログを S3、CloudWatch、Kinesis Firehose に送信することでネットワーク トラフィックの可視性を高めます。
  - AWS Network Firewall を使用して制御された制御されたアウトバウンドトラフィック用に別の VPC を使用してトラフィックを統合することが可能。
  - ![Screenshot 2023-07-26 at 8 45 01](https://github.com/yoshikikasama/network-and-server/assets/61643054/ea5fa8df-a158-4317-a149-1a423f2651d6)
  - ![Screenshot 2023-07-26 at 8 45 33](https://github.com/yoshikikasama/network-and-server/assets/61643054/693f680e-f5d2-48b8-8edf-3c64e897b021)

- 単一の Amazon CloudFront ウェブディストリビューションを使用して、複数のビヘイビアを使い、複数のオリジンのコンテンツを配信する:
  - 例えば、ウェブサイトが Amazon Simple Storage Service (Amazon S3) バケットからの静的コンテンツとロードバランサーからの動的コンテンツを提供する場合があります。単一の CloudFront ウェブディストリビューションから両方のタイプのコンテンツを提供できます。
    - 次の手順に従い、CloudFront ウェブディストリビューションを設定して、S3 バケットの静的コンテンツとロードバランサーの動的コンテンツを提供します。
    - CloudFront コンソールからウェブディストリビューションを開きます。
    - Origins (オリジン) タブを選択します。
    - S3 バケット用にオリジン 1 つとロードバランサー用に別なオリジンを作ります。
      - 注: カスタムオリジンサーバーまたは S3 ウェブサイトエンドポイントを使う場合、オリジンドメイン名 フィールドにオリジンのドメイン名を入力します。
    - ディストリビューションから ビヘイビア タブを選択します。
    - パスパターンを指定するビヘイビアを作成して、すべての静的コンテンツリクエストを S3 バケットにルーティングします。たとえば、「images/\*.jpg」パスパターンを設定して、画像 ディレクトリにある「.jpg」ファイルのすべてのリクエストを S3 バケットにルーティングします。
    - ディフォルト (\*) パスパターンビヘイビアをを編集して、ロードバランサーとしてオリジンを設定します。

## 66.

- AWS Control Tower: 規範的なベストプラクティスに従って、AWS 複数アカウント環境を設定して管理するための簡単な方法を提供します。

- SCP を許可リストと使用する:
  - AWS 管理の FullAWSAccess SCP を、許可したいサービスやアクションのみを明示的に許可する SCP で置き換える必要があります。デフォルトの FullAWSAccess SCP を削除することで、すべてのサービスのすべてのアクションが暗黙的に拒否されるようになります。そうするとカスタム SCP は、許可したいアクションのみについて、暗示的 Deny を明示的 Allow で上書きします。指定されたアカウントに対してアクセス許可を有効にするには、ルートからアカウントへの直接パス内の各 OU のすべての SCP が (アカウント自体にアタッチされていても)、そのアクセス許可を許可する必要があります。

## 67.

- AWS DataSync:

  - オンプレミスストレージ、エッジロケーション、または他のクラウドと、AWS ストレージサービスの間で、および AWS ストレージサービス間で、大規模なデータのコピーを簡素化、自動化、および高速化します。DataSync は、Network File System (NFS) 共有、Server Message Block (SMB) 共有、File system distribuito Hadoop (HDFS)、セルフマネージドオブジェクトストレージ、Google Cloud Storage、Azure Files、AWS Snowcone、Snow 上の Amazon S3 互換ストレージ、Amazon Simple Storage Service (Amazon S3)、Amazon Elastic File System (Amazon EFS) ファイルシステム、Amazon FSx for Windows File Server ファイルシステム、Amazon FSx for Lustre ファイルシステム、Amazon FSx for OpenZFS ファイルシステム、および Amazon FSx for NetApp ONTAP ファイルシステムとの間でデータをコピーできます。

- AWS のマイグレーション関連ツールおよびサービス:
  - ![Screenshot 2023-07-27 at 7 57 11](https://github.com/yoshikikasama/network-and-server/assets/61643054/47b689f7-3ed1-47d2-883c-becfa8a3a298)
  - https://aws.amazon.com/jp/blogs/psa/migration_tools/
  - AWS Storage Gateway:
    - ファイルベースのファイルゲートウェイ (Amazon S3 ファイルと Amazon FSx ファイル)、ボリュームベース (キャッシュおよび保存)、およびテープベースのストレージソリューションを提供します。
  - AWS Transfer Family:
    - Amazon S3 または Amazon EFS に対してファイル転送を行うフルマネージドサービスです。セキュアファイル転送プロトコル (SFTP)、ファイル転送プロトコル over SSL (FTP)、およびファイル転送プロトコル (FTP) のサポートにより、AWS Transfer Family は、既存の認証システムと統合し、Amazon Route 53 で DNS ルーティングを提供することで、ファイル転送ワークフローをシームレスに AWS に移行し、顧客やパートナーのアプリケーション環境は以前と変わることはありません。Amazon S3 または Amazon EFS にデータを保存することで、データのバックアップを残したり、処理・分析・機械学習・開発者ツールなどの様々な AWS サービスでそのデータを活用することもできます。AWS Transfer Family の使用は簡単です。インフラストラクチャの購入や設定は不要です。
    - 4 種類のゲートウェイのタイプが存在
      - ファイルゲートウェイ
        - NFS。更新データは非同期で転送。S3 をバックエンドストレージとして利用。
        - NFS を通してオンプレのファイルを AWS へ移行し活用
      - ボリュームゲートウェイ (2 方式):
        - プロトコル: iSCSI ブロックストレージ
        - 出力先: S3
        - アクセス頻度の高いデータは、キャッシュとしてローカルに保持
        - オンプレミス側の Storage Gateway へのリストア、もしくは AWS 上の EC2 Gateway へのリストアも可能
        - Gateway-Stored Volumes: 更新データは非同期で転送。オンプレから AWS への DR を目的とし、オンプレの特定ディスクボリュームを自動で AWS に複製
        - Gateway-Cached Volumes: アクセス頻度の高いデータは、キャッシュとしてローカルに保持。1 ボリューム最大 32TB が実現できるローカルキャッシュスとして利用
      - テープゲートウェイ: 物理テープライブラリ(VTL)。出力先: S3。
      - Amazon FSx ファイルゲートウェイ
  - AWS DataSync:
    - オンプレミスのストレージシステムと AWS ストレージサービス間、および AWS ストレージサービス間のデータ移動を簡素化、自動化、および高速化するオンラインデータ転送サービスです。DataSync を使用して、アクティブなデータセットを AWS に移行したり、データをアーカイブしてオンプレミスのストレージ容量を解放したり、ビジネス継続性のためにデータを AWS にレプリケートしたり、分析や処理のためにクラウドにデータを転送したりできます。
    - 大量のデータを移動するスクリプトの作成、保守、監視、およびトラブルシューティングを行う場合、IT 運用に負担がかかり、移行プロジェクトの速度が遅くなる可能性があります。DataSync は、この作業を排除するか、自動的に処理します。DataSync は、転送中のデータの暗号化、転送中および保管時のデータ整合性検証などの組み込みのセキュリティ機能を提供します。ネットワーク帯域幅の使用を最適化し、ネットワーク接続障害から自動的に回復します。さらに、DataSync は、データ転送のスケジュール設定や、Amazon CloudWatch のメトリクス、ログ、イベントを通じた転送プロセスの詳細な可視性などの制御およびモニタリング機能を提供します。
    - DataSync はネットワークファイルシステム(NFS) 共有、サーバーメッセージブロック (SMB) 共有、自己管理オブジェクトストレージ、AWS Snowcone、Amazon Simple Storage Service (Amazon S3) バケット、Amazon Elastic File System (アマゾン EFS) ファイルシステム、および Windows ファイルシステム用 Amazon FSx の間でデータをコピーできます。
  - AWS データ移行サービス比較:
    - ![Screenshot 2023-07-27 at 8 12 44](https://github.com/yoshikikasama/network-and-server/assets/61643054/c608e55f-4abc-4148-81a6-45fdf41f3afd)

## 69.

- スロットリング: 一定の時間内に、事業者が特定の操作に対して送信できるリクエストの数を制限するプロセスです。
- Amazon DynamoDB Accelerator(DAX): キャッシュ機能を提供。読み取りパフォーマンスの向上に役立つ。

## 70.

- AWS Control Tower:

  - Landing Zone: AWS Control Tower では、ID、フェデレーティッドアクセス、アカウント構造のためのベストプラクティスのブループリントを使用して、新しい Landing Zone のセットアップを自動化します。Landing Zone に自動的に実装されるブループリントの例としては、以下のことを実行するものが挙げられます。
    - AWS Organizations を使用してマルチアカウント環境を作成します。
    - AWS IAM アイデンティティセンター (AWS SSO の後継) 内のデフォルトディレクトリを使用した ID 管理を提供します。
    - AWS IAM アイデンティティセンター (AWS SSO の後継) を使用したアカウントへのフェデレーティッドアクセスを提供します。
    - AWS CloudTrail のログや、Amazon Simple Storage Service (Amazon S3) に保存される AWS Config のログを集中管理します。
    - AWS IAM アイデンティティセンター (AWS SSO の後継) を使用してクロスアカウントセキュリティ監査を有効化します。
    - AWS Control Tower で設定されたランディングゾーンは、必須または強く推奨される一連のガードレールを使用して管理されます。これらのガードレールはお客様がセルフサービスのコンソールを通じて選択するもので、その使用によってアカウントと設定をポリシーに確実に準拠させることができます。
  - Account Factory:
    - 組織内の新しいアカウントのプロビジョニングを自動化するものです。設定可能なアカウントテンプレートです。これを使用することで、事前承認済みのアカウント設定を用いて新しいアカウントのプロビジョニングを標準化することができます。事前に承認されたネットワーク構成とリージョン選択を使用して Account Factory を構成し、構築者が AWS Service Catalog を使用して新しいアカウントを構成およびプロビジョンするためのセルフサービスを有効にすることができます。さらに、Account Factory for Terraform などの Control Tower ソリューションを利用して、エンドユーザーに配信する前に、ビジネスポリシーとセキュリティポリシーを満たす Control Tower 管理アカウントのプロビジョンとカスタマイズを自動化できます。
  - 予防用および検出用のガードレール:
    - ガードレールは、セキュリティ、オペレーション、コンプライアンス向けの事前にパッケージ化されたガバナンスルールです。これらは、お客様が選択し、企業全体または特定のアカウントのグループに適用できます。ガードレールは簡単な英語で表現されています。これを使用することで、特定のガバナンスポリシーが AWS 環境に適用され、AWS Organizations の組織単位 (OU) 内で有効になります。各ガードレールには 2 つの特徴があり、1 つは予防用または検出用のいずれか、もう 1 つは必須または任意のいずれかになります。予防用ガードレールでは、意図を確立し、ポリシーに違反するリソースのデプロイを防止します (例えば、「すべてのアカウントで AWS CloudTrail を有効化する」)。検出用ガードレール (例えば、「Amazon S3 バケットに対する公開読み取りアクセスが許可されているかどうかを検出する」) は、デプロイされたリソースが違反していないかを継続的にモニタリングします。AWS Control Tower では、以下を実行することで、ガードレールを自動的に詳細な AWS ポリシーに変換します。
    - AWS CloudFormation を使用して基本設定を確立する
    - サービスコントロールポリシー (予防用ガードレール向け) を使用して基盤となる実装への設定変更を防止する
    - AWS Config ルール (検出用ガードレール向け) を使用して設定変更を継続的に検出する
    - AWS Control Tower ダッシュボードでガードレールのステータスを更新する
  - 必須および任意のガードレール:
    - AWS Control Tower では、AWS のベストプラクティスおよびガバナンス向けの一般的なカスタマーポリシーに基づく厳選されたガードレールのセットを提供しています。必須のガードレールは、Landing Zone のセットアップの一部として自動的に使用されます。必須のガードレールの例では、以下のことが実行されます。
      - AWS Control Tower や AWS CloudFormation で設定された AWS IAM ロールの変更を不許可にする
      - ログアーカイブの公開読み取りアクセス設定の検出
      - ログアーカイブの AWS Control Tower で作成された Amazon S3 バケットのバケットポリシーの変更を許可しない
      - クロスリージョンのネットワークを禁止する
    - また、任意のガードレールはいつでも有効にすることができます。任意のガードレールが有効な OU の配下でプロビジョニングされたすべてのアカウントでは、これらのガードレールが自動的に継承されます。任意のガードレールの例には、以下のようなものがあります。
      - Amazon S3 バケットへの公開書き込みアクセスが許可されているかどうかの検出
      - ルートユーザーの MFA が有効であるかどうかの検出
      - Amazon EC2 インスタンスに接続された Amazon EBS ボリュームの暗号化が有効であるかどうかの検出

- AWS Firewall Manager: AWS Network Firewall のファイアウォールルールをデプロイし、アカウントと Amazon VPC 間でネットワークを出入りするトラフィックを 1 か所から制御できます。一元的に設定したルールのセットへの変更が、アカウントと VPC に自動的にデプロイされます。これにより、セキュリティ管理者は組織内に新しいアカウントと VPC が作成された場合でも、組織全体で一元的に義務付けられたファイアウォールルールを一貫して適用できます。同時に、Firewall Manager は、Network Firewall 保護が欠落している VPC やアカウントなどの非準拠の問題も報告します。

- AWS Outposts ラック:

  - フルマネージド型の AWS インフラストラクチャ、ネイティブな AWS のサービス、API、およびツールを、オンプレミス施設のほとんどすべての顧客に提供します。AWS Outposts ラックは、低レイテンシー、ローカルでのデータ処理、またはローカルでのデータ保存のためにオンプレミスで実行する必要のあるアプリケーションを可能にします。その一方で、オンプレミスのインフラストラクチャの調達、管理、アップグレードのために必要な、差別化につながらない面倒な作業を取り除きます。
  - ハードウェアの管理(物理的な管理下)を維持するという会社の要件を満たし、低レイテンシーな通信のために Amazon S3 Bucket と Amazon EC2 インスタンスを Outposts ラックにデプロイすることもできる。

- ElastiCache: データをノードのメモリに保存するので非常に高速でデータの出し入れが可能です。ですがメモリにデータを保存しているのでノードが落ちてしまう（再起動を含む）と中のデータが無くなってしまいます。なので ElastiCache には無くなっても良いデータを保存するようにしましょう。
- DynamoDB: 可用性担保のために書き込まれたデータを複数の AZ に保存したり、接続には SSL を用いるので ElastiCache に比べるとやや書き込みが遅くなります。ElastiCache は構成もユーザが選べるので通信元（クライアント）とノードを同一 AZ に寄せればより通信を早くするということも可能ですね。また例えばセッション情報のような頻繁に書き/読み込みされるようなデータの場合にはリクエストの度に課金されていく DynamoDB だと ElastiCache に比べて料金が割高になる可能性があります。
- DynamoDB DAX:

  - キャッシュ機能を提供するサービス。
  - DynamoDB に書き込まれた値が反映されて、結果整合性のある読み込み時にのみ参照される DynamoDB の前段に存在するキャッシュサービスです。VPC 内からの利用が必須です。
  - DynamoDB の読み込みコストを軽減できます。書き込み処理の場合には一旦 DynamoDB に書き込まれてからキャッシュに反映される仕組みなので書き込んだ値はすぐにはキャッシュに反映されません。
  - DAX を検討される際にはその特徴（VPC 内からしか使えない、書き込んだ値はすぐには反映されない、結果整合性のある読み込みでしか参照されない）を良く理解しアプリケーション的に問題がないことを確認してください。

- 高速な通信がしたい、保存するデータは書き込みと読み込みが頻繁に発生するためコストが心配
  - ElastiCache
- データの永続化がしたい

  - DynamoDB

- App Runner: ソースコードまたはコンテナレジストリに接続することで、アプリケーションがデプロイされます。
