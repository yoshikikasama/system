# システム設計の面接試験

## 2 章 おおまかな見積もり

- 2 のべき乗:

| べき乗 | おおよそのデータ量 | Full name    | Short name |
| ------ | ------------------ | ------------ | ---------- |
| 2^10   | 1000               | 1 キロバイト | 1KB        |
| 2^20   | 100 万             | 1 メガバイト | 1MB        |
| 2^30   | 100 億             | 1 ギガバイト | 1GB        |
| 2^40   | 100 兆             | 1 テラバイト | 1TB        |
| 2^50   | 100 京             | 1 ペタバイト | 1PB        |

- Google のディーン博士が 2010 年における典型的なコンピュータ操作の時間を明らかにしている。レイテンシー数値を可視化。
- ![image](https://github.com/yoshikikasama/system/assets/61643054/d3f719c4-b895-4208-b80c-97982bba5d4a)
- 次の結論が得られる

  - メモリは速いがディスクは遅い。
  - 可能ならディスクのシークは避ける
  - 単純な圧縮アルゴリズムは速い
  - 可能であればインターネット送信前にデータを圧縮する
  - データセンターは通常、異なる地域にあり、データセンターにデータを送るのに時間がかかる

- QPS（クエリ毎秒）: 検索システムやデータベースなどが 1 秒間に外部からの問い合わせ（クエリ）を処理する件数

- 例の前提条件:
  - 月間アクティブユーザー数 3 億人
  - 50%のユーザーが毎日 Twitter を利用
  - ユーザーは 1 日平均 2 件のツイートを投稿
  - ツイートの 10%はメディアを含む
  - データは 5 年間保存
- 推定値:
- クエリ/秒 (QPS)の推定値:
  - daily active user = 3 億人 ✖️ 50% = 1 億 500 万人
  - ツイートの QPS = 1 億 500 万人 ✖️ 2 ツイート/24 時間/3600 秒 = 約 3500QPS
  - ピーク時の QPS = 2 ✖️ QPS = 7000
- 平均的なツイートサイズ:
  - ツイート ID: 64B
  - テキスト: 140B
  - メディア: 1MB
- メディアの保存量: 1 億 5000 万 ✖️ 2 \_ 10% ✖️ 1MB = 30 TB/日
- 5 年間のメディアの保存量: 30TB ✖️ 365 ✖️ 5 = 55PB
